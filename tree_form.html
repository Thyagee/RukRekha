<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tree Photo Upload</title>
</head>

<body>

    <h1>üå≥ Upload Tree Photo</h1>

    <input type="file" id="fileInput">
    <button id="uploadBtn">Upload</button>

    <p id="status">Status: Waiting...</p>
    <p>üåç File URL: <a id="fileURL" href="#" target="_blank"></a></p>

    <!-- ‚úÖ Firebase App + Storage with ESM -->
    <script type="module">
        // ‚úÖ Import Firebase modules via URL
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";

        // ‚úÖ Your Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyBKJdtJ7Zs57af0cyv-cF6thnBS_4wng3o",
            authDomain: "rukrekha-45ad3.firebaseapp.com",
            projectId: "rukrekha-45ad3",
            storageBucket: "rukrekha-45ad3.firebasestorage.app",
            messagingSenderId: "573455531940",
            appId: "1:573455531940:web:0a4d02e98dc08b4f664b31"
        };

        // ‚úÖ Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);

        // ‚úÖ Upload function
        async function uploadFile() {
            const file = document.getElementById('fileInput').files[0];
            const status = document.getElementById('status');
            const fileURL = document.getElementById('fileURL');

            if (!file) {
                status.innerText = "‚ùå No file selected.";
                return;
            }

            const storageRef = ref(storage, 'tree_photos/' + file.name);
            status.innerText = "‚è≥ Uploading...";

            try {
                const snapshot = await uploadBytes(storageRef, file);
                const downloadURL = await getDownloadURL(snapshot.ref);
                status.innerText = "‚úÖ Upload successful!";
                fileURL.href = downloadURL;
                fileURL.innerText = downloadURL;
                console.log('File URL:', downloadURL);
            } catch (error) {
                console.error(error);
                status.innerText = "‚ùå Upload error: " + error.message;
                fileURL.href = '#';
                fileURL.innerText = '';
            }
        }

        // ‚úÖ Bind upload button
        document.getElementById('uploadBtn').addEventListener('click', uploadFile);
    </script>

</body>

</html>